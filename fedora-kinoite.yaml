include: kde-desktop-pkgs.yaml
ref: fedora/38/${basearch}/kinoite
rojig:
  name: fedora-kde
  summary: "Fedora Kinoite (KDE) base image"
  license: MIT
packages:
  - fedora-release-kinoite
  # Wayland support
  - kwayland-integration
  - kwin-wayland
  - plasma-workspace-wayland
  - xorg-x11-server-Xwayland
  # Portals for Flatpak
  - xdg-desktop-portal-kde
  # Provide an archive manager by default
  - ark
  # Keep some basic apps installed until we have Flatpaks available
  # See https://pagure.io/fedora-kde/SIG/issue/13
  - gwenview
  - kcalc
  - kwrite
  - okular
  # Install some minor optional tools for KInfoCenter
  - vulkan-tools
  - xdpyinfo
  # Includes a KIO & KCM (can not be Flatpak'ed), used by Dolphin and Gwenview
  # See https://pagure.io/fedora-kde/SIG/issue/291
  - kamera
  # Make sure that previous Anaconda dependencies are kept in the image
  # See: https://pagure.io/fedora-kde/SIG/issue/243
  - bcache-tools
  - dmraid
  - mobile-broadband-provider-info
  # Include krfb by default. See: https://pagure.io/fedora-kde/SIG/issue/13
  - krfb
  # Include Filelight by defaulkt as it does not work well as Flatpak
  - filelight
  # Make sure that modem support is installed
  - NetworkManager-ppp
  # Install gdb-minimal to make getting backtraces work with DrKonqi
  - gdb-minimal
  # Testing https://pagure.io/fedora-kde/SIG/issue/109
  - kdenetwork-filesharing
  - samba-usershares

# Make sure the following are not pulled in when Recommended by other packages
exclude-packages:
  - plasma-discover-offline-updates
  - plasma-discover-packagekit
  - plasma-pk-updates
  # Manually excluded as recommended by gtk3 (and likely gtk4 in the future)
  # See https://pagure.io/fedora-kde/SIG/issue/124
  - tracker
  - tracker-miners

# Kinoite specific workarounds
postprocess:
  - |
    #!/bin/bash
    set -xeuo pipefail
    # Setup a symlink for gdb-minimal to use it as default gdb
    echo "L /usr/local/bin/gdb - - - - /usr/bin/gdb-minimal" > /usr/lib/tmpfiles.d/kinoite-gdb.conf

repos:
  - fedora-38
  - fedora-38-updates
